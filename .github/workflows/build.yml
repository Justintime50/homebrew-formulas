name: build

on: [push, pull_request]

jobs:
  install:
    runs-on: macos-latest
    steps:
      - name: Set up Homebrew
        uses: Homebrew/actions/setup-homebrew@master
      - name: Brew tap
        run: brew tap justintime50/formulas
      - name: Brew install
        run: |
          brew install brew-backup
          brew install brew-update
          brew install burn-notice
          brew install easypost-cli
          brew install freedom
          brew install secure-browser-kiosk
        if: always() # Run all commands even if one fails
  audit:
    runs-on: macos-latest
    steps:
      - name: Set up Homebrew
        uses: Homebrew/actions/setup-homebrew@master
      - name: Brew audit
          brew audit --strict --online brew-backup
          brew audit --strict --online brew-update
          brew audit --strict --online burn-notice
          brew audit --strict --online easypost-cli
          brew audit --strict --online freedom
          brew audit --strict --online secure-browser-kiosk
        if: always() # Run all commands even if one fails
  # test:
  #   steps:
  #     - name: Set up Homebrew
  #       uses: Homebrew/actions/setup-homebrew@master
  #     - name: Brew test
  #       run: |
  #         brew test brew-backup
  #         brew test brew-update
  #         brew test burn-notice
  #         brew test easypost-cli
  #         brew test freedom
  #         brew test secure-browser-kiosk
  #       if: always() # Run all commands even if one fails
