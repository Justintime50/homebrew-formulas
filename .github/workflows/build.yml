name: build

on: [push, pull_request]

jobs:
  install:
    runs-on: macos-latest
    steps:
      - name: Set up Homebrew
        uses: Homebrew/actions/setup-homebrew@master
      - name: Brew tap
        run: brew tap justintime50/formulas
      - name: Brew install
        run: brew install brew-backup
        if: always()
        run: brew install brew-update
        if: always()
        run: brew install burn-notice
        if: always()
        run: brew install easypost-cli
        if: always()
        run: brew install freedom
        if: always()
        run: brew install secure-browser-kiosk
        if: always()
  audit:
    runs-on: macos-latest
    steps:
      - name: Set up Homebrew
        uses: Homebrew/actions/setup-homebrew@master
      - name: Brew audit
          run: brew audit --strict --online brew-backup
          if: always()
          run: brew audit --strict --online brew-update
          if: always()
          run: brew audit --strict --online burn-notice
          if: always()
          run: brew audit --strict --online easypost-cli
          if: always()
          run: brew audit --strict --online freedom
          if: always()
          run: brew audit --strict --online secure-browser-kiosk
          if: always()
  # test:
  #   steps:
  #     - name: Set up Homebrew
  #       uses: Homebrew/actions/setup-homebrew@master
  #     - name: Brew test
  #       run: |
  #         brew test brew-backup
  #         brew test brew-update
  #         brew test burn-notice
  #         brew test easypost-cli
  #         brew test freedom
  #         brew test secure-browser-kiosk
